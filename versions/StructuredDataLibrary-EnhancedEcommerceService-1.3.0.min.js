class IndexDataSelector extends DataSelector{constructor(e){super(e,"","",!0)}getData(e){return Array.from(e.parentElement.children).indexOf(e)}}class EventDataSchema extends DataSchema{constructor(e,t,n,s=null,a=null,r=!0){super(e,t,n,s,a,!1),this.asArray=r}getData(e){const t=e.closest(this.itemContainerSelector);return this.asArray?[this._getDataFromItemContainer(t)]:this._getDataFromItemContainer(t)}}class BoundEventListener{constructor(e,t,n){this.element=e,this.eventListener=t,this.eventType=n}removeEvent(){this.element.removeEventListener(this.eventType,this.eventListener)}}class EnhancedEcommerceService{constructor(){this.boundClickEventListeners=[],this.dataLayerName="dataLayer"}pushEcommerceEvent(e,t,n=!0){this.privatePushEcommerceEvent(e,t,document,n)}privatePushEcommerceEvent(e,t,n,s){const a=t.getData(n);let r={event:e};s?(a.length=Math.min(a.length,200),r.ecommerce={},r.ecommerce.items=a):(null!=a.items&&(a.items.length=Math.min(a.items.length,200)),r[t.name]=a),this.privatePushToDataLayer({ecommerce:null}),this.privatePushToDataLayer(r)}bindClickEcommerceEvent(e,t,n="",s=!0,a=!1){document.querySelectorAll(t.itemContainerSelector).forEach((r=>{let i=[];""===n?i.push(r):i=r.querySelectorAll(n),i.forEach((n=>{const eventListener=r=>{a&&r.stopPropagation(),this.privatePushEcommerceEvent(e,t,n,s)};n.addEventListener("click",eventListener),this.boundClickEventListeners.push(new BoundEventListener(n,eventListener,"click"))}))}))}pushCustomEvent(e,t){this._pushCustomEvent(e,t,document)}_pushCustomEvent(e,t,n){const s={event:e,...t.getData(n)};this.privatePushToDataLayer(s)}bindClickCustomEvent(e,t,n="",s=!1){document.querySelectorAll(t.itemContainerSelector).forEach((a=>{let r=[];""===n?r.push(a):r=a.querySelectorAll(n),r.forEach((n=>{const eventListener=a=>{s&&a.stopPropagation(),this._pushCustomEvent(e,t,n)};n.addEventListener("click",eventListener),this.boundClickEventListeners.push(new BoundEventListener(n,eventListener,"click"))}))}))}privatePushToDataLayer(e){window[this.dataLayerName]=window[this.dataLayerName]||[],window[this.dataLayerName].push(e),console.log("Enhanced Ecommerce:",window[this.dataLayerName][window[this.dataLayerName].length-1])}removeAllBoundClicks(){this.boundClickEventListeners.forEach((e=>{e.removeEvent()})),this.boundClickEventListeners=[]}}window.enhancedEcommerceService=new EnhancedEcommerceService;