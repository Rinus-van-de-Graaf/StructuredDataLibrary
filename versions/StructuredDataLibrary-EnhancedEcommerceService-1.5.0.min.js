class IndexDataSelector extends DataSelector{constructor(e){super(e,"","",!0)}getData(e){return Array.from(e.parentElement.children).indexOf(e)}}class EventDataSchema extends DataSchema{constructor(e,t,n,r=null,a=null,o=!0){super(e,t,n,r,a,!1),this.asArray=o}getData(e){const t=e.closest(this.itemContainerSelector);return this.asArray?[this.privateGetDataFromItemContainer(t)]:this.privateGetDataFromItemContainer(t)}}class BoundEventListener{constructor(e,t,n){this.element=e,this.eventListener=t,this.eventType=n}removeEvent(){this.element.removeEventListener(this.eventType,this.eventListener)}}class EnhancedEcommerceService{constructor(){this.boundClickEventListeners=[],this.dataLayerName="dataLayer"}pushEcommerceEvent(e,t,n=!0,r=null){this.privatePushEcommerceEvent(e,t,document,n,r)}privatePushEcommerceEvent(e,t,n,r,a){try{const o=t.getData(n);let s={event:e};if(r)null!=o&&(o.length=Math.min(o.length,200)),s.ecommerce={},s.ecommerce.items=o||[];else{if(null==o)return void(window.StructuredDataLibrarySettings.DebugMode&&console.warn(`No data was found for the Ecommerce object for '${e}'. Cancelling the data layer push.`));null!=o.items&&(o.items.length=Math.min(o.items.length,200)),s[t.name]=o}a&&a.length>0&&a.forEach((e=>{s[e.name]=e.getData(document)})),this.privatePushToDataLayer({ecommerce:null}),this.privatePushToDataLayer(s)}catch(e){console.error(e)}}bindClickEcommerceEvent(e,t,n="",r=!0,a=!1,o=null){try{document.querySelectorAll(t.itemContainerSelector).forEach((s=>{let c=[];""===n?c.push(s):c=s.querySelectorAll(n),c.forEach((n=>{const eventListener=s=>{a&&s.stopPropagation(),this.privatePushEcommerceEvent(e,t,n,r,o)};n.addEventListener("click",eventListener),this.boundClickEventListeners.push(new BoundEventListener(n,eventListener,"click"))}))}))}catch(e){console.error(e)}}pushCustomEvent(e,t){this.privatePushCustomEvent(e,t,document)}privatePushCustomEvent(e,t,n){try{const r={event:e,...t.getData(n)};this.privatePushToDataLayer(r)}catch(e){console.error(e)}}bindClickCustomEvent(e,t,n="",r=!1){try{document.querySelectorAll(t.itemContainerSelector).forEach((a=>{let o=[];""===n?o.push(a):o=a.querySelectorAll(n),o.forEach((n=>{const eventListener=a=>{r&&a.stopPropagation(),this.privatePushCustomEvent(e,t,n)};n.addEventListener("click",eventListener),this.boundClickEventListeners.push(new BoundEventListener(n,eventListener,"click"))}))}))}catch(e){console.error(e)}}privatePushToDataLayer(e){window[this.dataLayerName]=window[this.dataLayerName]||[],window[this.dataLayerName].push(e),console.log("Enhanced Ecommerce:",window[this.dataLayerName][window[this.dataLayerName].length-1])}removeAllBoundClicks(){try{this.boundClickEventListeners.forEach((e=>{e.removeEvent()})),this.boundClickEventListeners=[]}catch(e){console.error(e)}}}window.enhancedEcommerceService=new EnhancedEcommerceService;