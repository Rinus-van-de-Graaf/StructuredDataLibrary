window.StructuredDataLibrarySettings={DebugMode:!1},window.InputType={Text:"text",Number:"number",Image:"image",Value:"value",Url:"url"};class DataSelector{constructor(e,t,a,r,n="",i=!1){this.name=e,this.selector=t,this.inputType=a,this.mandatory=r,this.attribute=n,this.isCollection=i}getData(e){if(!this.isCollection){const t=""===this.selector&&this.attribute.length>0?e:e.querySelector(this.selector);return this.privateGetDataFromItem(t)}const t=e.querySelectorAll(this.selector);let a=[];return t.forEach((e=>{const t=this.privateGetDataFromItem(e);null!==t&&a.push(t)})),a.length>0?a:(window.StructuredDataLibrarySettings.DebugMode&&console.warn(`The data selector '${this.name}', using selector '${this.selector}', had no results for the collection.`),null)}privateGetDataFromItem(e){if(null==e)return window.StructuredDataLibrarySettings.DebugMode&&console.warn(`The data selector '${this.name}', using selector '${this.selector}', had no item to retrieve data from.`),null;if(this.inputType===InputType.Image)return e.src;if(this.inputType===InputType.Value)return e.value;if(this.inputType===InputType.Url)return e.href;let t=this.selector.indexOf("[itemprop=")>=0?e.content:""===this.attribute?e.innerHTML:e.dataset[this.attribute];if(this.inputType===InputType.Text)return t;if(this.inputType===InputType.Number){if(null==t)return window.StructuredDataLibrarySettings.DebugMode&&console.warn(`The data selector '${this.name}', using selector '${this.selector}', had no value converted to a number. The selector had a result but no data could be retrieved from the element.`),null;t=t.replace(",-","").replace(",",".");let e=t.match(/\d+\.\d+/);return null!=e?1===e.length?Number(e[0]):(window.StructuredDataLibrarySettings.DebugMode&&console.warn(`The data selector '${this.name}', using selector '${this.selector}', had multiple decimal values converted to a number.`),null):(e=t.match(/\d+/),null!=e?1===e.length?Number(e[0]):(window.StructuredDataLibrarySettings.DebugMode&&console.warn(`The data selector '${this.name}', using selector '${this.selector}', had multiple values converted to a number.`),null):(window.StructuredDataLibrarySettings.DebugMode&&console.warn(`The data selector '${this.name}', using selector '${this.selector}', had no value converted to a number.`),null))}}}class FixedDataSelector extends DataSelector{constructor(e,t){super(e,"","",!0),this.fixedValue=t}getData(e){return this.fixedValue}}class DataSchema{constructor(e,t,a,r=null,n=null,i=!1){this.name=e,this.itemContainerSelector=t,this.mandatory=a,this.dataSelectors=r,this.dataSchemas=n,this.isCollection=i}getData(e){if(!this.isCollection){const t=""===this.itemContainerSelector?e:e.querySelector(this.itemContainerSelector);return null==t?(window.StructuredDataLibrarySettings.DebugMode&&console.warn(`The data schema '${this.name}', using selector '${this.itemContainerSelector}', did not find an element.`),null):this.privateGetDataFromItemContainer(t)}const t=e.querySelectorAll(this.itemContainerSelector);let a=[];return t.forEach((e=>{const t=this.privateGetDataFromItemContainer(e);null!==t&&a.push(t)})),a.length>0?a:(window.StructuredDataLibrarySettings.DebugMode&&console.warn(`The data schema '${this.name}', using selector '${this.itemContainerSelector}', had no results for the collection.`),null)}privateGetDataFromItemContainer(e){let t={},a=!1;return null!==this.dataSelectors&&this.dataSelectors.forEach((r=>{const n=r.getData(e);null!==n?t[r.name]=n:r.mandatory&&(a=!0)})),a?(window.StructuredDataLibrarySettings.DebugMode&&console.warn(`The data schema '${this.name}', using selector '${this.itemContainerSelector}', missed mandatory data.`),null):(null!==this.dataSchemas&&this.dataSchemas.forEach((r=>{const n=r.getData(e);null!==n?t[r.name]=n:r.mandatory&&(a=!0)})),a?(window.StructuredDataLibrarySettings.DebugMode&&console.warn(`The data schema '${this.name}', using selector '${this.itemContainerSelector}', missed mandatory schema.`),null):t)}}