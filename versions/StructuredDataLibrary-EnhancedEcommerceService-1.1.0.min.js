class IndexDataSelector extends DataSelector{constructor(e){super(e,"","",!0)}getData(e){return Array.from(e.parentElement.children).indexOf(e)}}class EventDataSchema extends DataSchema{constructor(e,t,n,r=null,s=null,a=!0){super(e,t,n,r,s,!1),this.asArray=a}getData(e){const t=e.closest(this.itemContainerSelector);return this.asArray?[this._getDataFromItemContainer(t)]:this._getDataFromItemContainer(t)}}class BoundEventListener{constructor(e,t,n){this.element=e,this.eventListener=t,this.eventType=n}removeEvent(){this.element.removeEventListener(this.eventType,this.eventListener)}}class EnhancedEcommerceService{constructor(){this.boundClickEventListeners=[]}pushEcommerceEvent(e,t,n=!0){this.privatePushEcommerceEvent(e,t,document,n)}privatePushEcommerceEvent(e,t,n,r){const s=t.getData(n);let a={event:e};r?(s.length=Math.min(s.length,200),a.ecommerce={},a.ecommerce.items=s):(null!=s.items&&(s.items.length=Math.min(s.items.length,200)),a[t.name]=s),this.privatePushToDataLayer({ecommerce:null}),this.privatePushToDataLayer(a)}bindClickEcommerceEvent(e,t,n="",r=!0,s=!1){document.querySelectorAll(t.itemContainerSelector).forEach((a=>{const c=""===n?a:a.querySelector(n);if(null==c)return;const eventListener=n=>{s&&n.stopPropagation(),this.privatePushEcommerceEvent(e,t,c,r)};c.addEventListener("click",eventListener),this.boundClickEventListeners.push(new BoundEventListener(c,eventListener,"click"))}))}pushCustomEvent(e,t){this._pushCustomEvent(e,t,document)}_pushCustomEvent(e,t,n){const r={event:e,...t.getData(n)};this.privatePushToDataLayer(r)}bindClickCustomEvent(e,t,n="",r=!1){document.querySelectorAll(t.itemContainerSelector).forEach((s=>{const a=""===n?s:s.querySelector(n);if(null==a)return;const eventListener=n=>{r&&n.stopPropagation(),this._pushCustomEvent(e,t,a)};a.addEventListener("click",eventListener),this.boundClickEventListeners.push(new BoundEventListener(a,eventListener,"click"))}))}privatePushToDataLayer(e){window.dataLayer=window.dataLayer||[],dataLayer.push(e),console.log("Enhanced Ecommerce:",dataLayer[dataLayer.length-1])}removeAllBoundClicks(){this.boundClickEventListeners.forEach((e=>{e.removeEvent()})),this.boundClickEventListeners=[]}}window.enhancedEcommerceService=new EnhancedEcommerceService;