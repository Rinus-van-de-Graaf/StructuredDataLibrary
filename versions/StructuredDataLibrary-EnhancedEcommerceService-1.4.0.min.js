class IndexDataSelector extends DataSelector{constructor(e){super(e,"","",!0)}getData(e){return Array.from(e.parentElement.children).indexOf(e)}}class EventDataSchema extends DataSchema{constructor(e,t,n,a=null,r=null,s=!0){super(e,t,n,a,r,!1),this.asArray=s}getData(e){const t=e.closest(this.itemContainerSelector);return this.asArray?[this._getDataFromItemContainer(t)]:this._getDataFromItemContainer(t)}}class BoundEventListener{constructor(e,t,n){this.element=e,this.eventListener=t,this.eventType=n}removeEvent(){this.element.removeEventListener(this.eventType,this.eventListener)}}class EnhancedEcommerceService{constructor(){this.boundClickEventListeners=[],this.dataLayerName="dataLayer"}pushEcommerceEvent(e,t,n=!0,a=null){this.privatePushEcommerceEvent(e,t,document,n,a)}privatePushEcommerceEvent(e,t,n,a,r){const s=t.getData(n);let o={event:e};if(a)null!=s&&(s.length=Math.min(s.length,200)),o.ecommerce={},o.ecommerce.items=s||[];else{if(null==s)return void(window.StructuredDataLibrarySettings.DebugMode&&console.warn(`No data was found for the Ecommerce object for '${e}'. Cancelling the data layer push.`));null!=s.items&&(s.items.length=Math.min(s.items.length,200)),o[t.name]=s}r&&r.length>0&&r.forEach((e=>{o[e.name]=e.getData(document)})),this.privatePushToDataLayer({ecommerce:null}),this.privatePushToDataLayer(o)}bindClickEcommerceEvent(e,t,n="",a=!0,r=!1,s=null){document.querySelectorAll(t.itemContainerSelector).forEach((o=>{let i=[];""===n?i.push(o):i=o.querySelectorAll(n),i.forEach((n=>{const eventListener=o=>{r&&o.stopPropagation(),this.privatePushEcommerceEvent(e,t,n,a,s)};n.addEventListener("click",eventListener),this.boundClickEventListeners.push(new BoundEventListener(n,eventListener,"click"))}))}))}pushCustomEvent(e,t){this._pushCustomEvent(e,t,document)}_pushCustomEvent(e,t,n){const a={event:e,...t.getData(n)};this.privatePushToDataLayer(a)}bindClickCustomEvent(e,t,n="",a=!1){document.querySelectorAll(t.itemContainerSelector).forEach((r=>{let s=[];""===n?s.push(r):s=r.querySelectorAll(n),s.forEach((n=>{const eventListener=r=>{a&&r.stopPropagation(),this._pushCustomEvent(e,t,n)};n.addEventListener("click",eventListener),this.boundClickEventListeners.push(new BoundEventListener(n,eventListener,"click"))}))}))}privatePushToDataLayer(e){window[this.dataLayerName]=window[this.dataLayerName]||[],window[this.dataLayerName].push(e),console.log("Enhanced Ecommerce:",window[this.dataLayerName][window[this.dataLayerName].length-1])}removeAllBoundClicks(){this.boundClickEventListeners.forEach((e=>{e.removeEvent()})),this.boundClickEventListeners=[]}}window.enhancedEcommerceService=new EnhancedEcommerceService;